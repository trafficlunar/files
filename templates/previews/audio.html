<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>{{ file }} — {{ page_title }}</title>

		<meta name="title" content="{{ file }} — {{ page_title }}" />
		<meta name="theme-color" content="#ffa6c1" />

		<meta property="og:title" content="{{ file }} — {{ page_title }}" />
		<meta property="og:audio" content="/{{ file }}/raw" />
		<meta property="og:audio:type" content="{{ mime_type }}" />

		<meta name="twitter:title" content="{{ file }} — {{ page_title }}" />
		<meta property="twitter:card" content="player" />
		<meta name="twitter:image" content="0" />
		<meta name="twitter:player:stream" content="/{{ file }}/raw" />
		<meta
			name="twitter:player:stream:content_type"
			content="{{ mime_type }}"
		/>

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,500,0,0"
		/>

		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/video.js/8.19.1/video-js.min.css"
			integrity="sha512-J3tx4ssoARFr4U9VmZmQe2q672q0jUeYizJW3vglkOBTlQ/N6kF3eVqZZzaey/TdIXH69s3HYe2nQwyxK/Emzw=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/videojs-wavesurfer/3.10.0/css/videojs.wavesurfer.min.css"
			integrity="sha512-fRr9a2nUOG7ZLUOkgR4gloxJnpU5t9ApNE+J/Az2k9dpfg0/PwyAke7UxdJuh3brlxsCTX5TFPvcdavwG3I5Qw=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>

		<link rel="stylesheet" href="/style.css" />

		<style>
			body {
				display: grid;
				grid-template-rows: 5rem auto;
			}
		</style>
	</head>
	<body>
		<header>
			<div id="left">
				<span id="file-name">{{ file }}</span>
				<span id="file-modified">Modified: {{ file_modified }}</span>
			</div>

			<div id="right">
				<div id="file-size">{{ file_size }}</div>

				<div id="seperator"></div>

				<div id="links">
					<a
						id="copy"
						class="tooltip"
						data-tooltip="Copy Link"
						role="button"
						tabindex="0"
					>
						<span class="material-symbols-outlined">link</span>
					</a>
					<a
						id="raw"
						class="tooltip"
						data-tooltip="View Raw File"
						href="/{{ file }}/raw"
					>
						<span class="material-symbols-outlined"
							>description</span
						>
					</a>
					<a
						id="download"
						class="tooltip"
						data-tooltip="Download"
						href="/{{ file }}/raw"
						download="{{ file }}"
					>
						<span class="material-symbols-outlined">download</span>
					</a>
				</div>
			</div>
		</header>

		<main>
            <audio id="audio" class="video-js" controls preload="auto">
				<p class="vjs-no-js">
					To listen to this audio, enable javascript or go to the top right
					corner and click the raw button.
				</p>
			</audio>
		</main>

        <script
			src="https://cdnjs.cloudflare.com/ajax/libs/video.js/8.19.1/video.min.js"
			integrity="sha512-48NkCweTzA9u2sP4GgKcEDm6IScPIMga142ipKFNcHfz7feUJXDJxO1jwc2l+5MvWfwMj4BDfQv8WIMhrPxZLQ=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/6.6.4/wavesurfer.min.js"
			integrity="sha512-/OXj4FUgEscXKD5YhrFOjx2NWZ7gjGatMETWNd0z6CNyF/pPDUto2Fu3qE2qqh1kVn5or3jGogF01s1ioSts9A=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/videojs-wavesurfer/3.10.0/videojs.wavesurfer.min.js"
			integrity="sha512-D9/Z+iKvCuAQwnF+jBqHjcLYLGzOcApU4wBKilGPM+Z8/5WnV1fjJ+TVxmGBU+dGl1lxN1ijZ0JN3y50pAZTqQ=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		></script>

		<script type="module">
			const mainElement = document.querySelector("main");
			const copyButton = document.getElementById("copy");

			copyButton.addEventListener("click", () => {
				navigator.clipboard.writeText(window.location.href);
			});
		</script>

		<script>
			const options = {
                width: 960,
                height: 120,
				plugins: {
					wavesurfer: {
						backend: "MediaElement",
                        displayMilliseconds: false,
						waveColor: "#ffa6c1",
						progressColor: "#1e1e2e",
						cursorColor: "#ffa6c1",
					}
				}
			};

			const player = videojs("audio", options, function () {
				player.src({ src: "/{{ file }}/raw", type: "{{ mime_type }}" });
			});
		</script>
	</body>
</html>
